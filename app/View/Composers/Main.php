<?php

namespace App\View\Composers;

use Roots\Acorn\View\Composer;

class Main extends Composer
{
    /**
     * Views served by this composer.
     *
     * @var array
     */
    protected static $views = [
        'front-page',
    ];

    /**
     * Data to be passed to view before rendering.
     *
     * @return array
     */
    public function with()
    {
        return [
            'main' => $this->getMainData(),
        ];
    }

    private function getMainData()
    {
        return [
            'hero' => $this->getHeroData(),
            'services' => $this->getServicesData(),
            'blog' => $this->getBlogData(),
            'testimonials' => $this->getTestimonialsData(),
            'cta_section' => $this->getCtaData(),
            'contact_section' => $this->getContactSectionData(),
        ];
    }

    private function getHeroData()
    {
        return [
            'title' => $this->getAcfFieldSafe('hero_title', false, '<strong>Twój partner</strong> <br><span class="font-normal! text-white">w&nbsp;Księgowości <br>i Podatkach</span>'),
            'description' => $this->getAcfFieldSafe('hero_description', false, 'Profesjonalną obsługą naszych klientów, niezależnie od wielkości i złożoności usług księgowej, zajmują się certyfikowani księgowi z kilkuletnim doświadczeniem.'),
            'hero_image' => $this->getAcfImageSafe('hero_image', false, 'large', get_template_directory_uri() . '/resources/images/fotel-2.png'),
        ];
    }

    private function getCtaData()
    {
        return [
            'title' => $this->getAcfFieldSafe('cta_title', false, '<strong>Umów się</strong> <br> na spotkanie'),
            'image' => $this->getAcfImageSafe('image', false, 'large', get_template_directory_uri() . '/resources/images/telefon.png'),
            'description' => $this->getAcfFieldSafe('cta_description', false, 'Nasi księgowi w Hanwell są cały czas do Twojej dyspozycji – zadzwoń albo napisz, by umówić się na spotkanie. Zajmiemy się Twoją sprawą w sposób rzetelny i kompleksowy!'),
            'book_now_text' => $this->getAcfFieldSafe('cta_book_now_text', false, 'Umów się'),
            'book_now_url' => $this->getAcfUrlSafe('cta_book_now_url', false, '#'),
        ];
    }

    private function getServicesData()
    {
        $items = $this->getAcfFieldSafe('services', false, []);

        if (empty($items) || !is_array($items)) {
            $items = [
                ['label_1' => 'Firmy', 'label_2' => 'LTD', 'href' => '#ltd', 'icon' => '
<svg width="75" height="72" viewBox="0 0 75 72" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M67.3327 53.8779C66.7511 53.8847 66.815 53.8565 66.0417 53.9106V35.8209C66.0417 33.8849 64.4666 32.3098 62.5306 32.3098H53.6663C53.6615 32.3098 53.657 32.3091 53.6522 32.3091H43.4445V5.05759L51.8163 13.15C52.2895 13.6075 52.5609 14.2472 52.5609 14.9053V28.2562C52.5609 28.8589 53.0495 29.3475 53.6522 29.3475C54.2549 29.3475 54.7435 28.8589 54.7435 28.2562V14.9053C54.7435 13.6589 54.2295 12.4471 53.3332 11.5807L43.1116 1.70029C42.8818 1.48465 42.4415 1.29112 42.0054 1.45045L23.6683 7.61417V3.36534C23.6822 1.5088 22.0164 -0.107067 20.0787 0.0055562C18.2253 0.0055562 16.7174 1.51273 16.7174 3.36534V9.9506L11.9199 11.5633C10.0354 12.1968 8.76919 13.958 8.76919 15.9463V53.8839C3.91286 54.0083 0 57.9946 0 62.8803V68.4297C0 69.9363 1.22561 71.1618 2.73206 71.1618H71.7679C73.2745 71.1618 74.5 69.9362 74.5 68.4297V61.0452C74.5001 57.0932 71.2848 53.8779 67.3327 53.8779ZM67.3327 56.0605C70.0813 56.0605 72.3175 58.2967 72.3175 61.0453V62.1902H61.7318V61.0453C61.7343 58.0623 64.3553 55.8021 67.3327 56.0605ZM63.8591 35.8209V54.4737C61.3252 55.5799 59.5492 58.1084 59.5492 61.0452V62.19H43.4445V34.4924H62.5306C63.2631 34.4924 63.8591 35.0884 63.8591 35.8209ZM18.9 3.36534C18.9 2.71623 19.4288 2.18818 20.0787 2.18818C20.6623 2.10247 21.4482 2.5601 21.4857 3.36534V8.34783L18.9 9.21695V3.36534ZM8.76933 56.0644V62.1902H2.21724C2.55671 58.8287 5.34741 56.18 8.76933 56.0644ZM2.18261 68.4299V64.3728H8.76933V68.9793H2.7322C2.4291 68.9793 2.18261 68.7328 2.18261 68.4299ZM10.9519 15.9463C10.9519 14.8966 11.6204 13.9668 12.6154 13.6322L41.262 4.0031V9.94929L17.461 17.9498C16.8897 18.1417 16.5822 18.7605 16.7743 19.3319C16.9275 19.788 17.3527 20.0758 17.8086 20.0758C17.9238 20.0758 18.0411 20.0574 18.1565 20.0186L41.262 12.2521V17.804L17.461 25.8043C16.8897 25.9964 16.5822 26.6152 16.7743 27.1865C16.9275 27.6425 17.3527 27.9303 17.8086 27.9303C17.9238 27.9303 18.0411 27.912 18.1565 27.8731L41.262 20.1065V25.6583L17.461 33.6588C16.8897 33.8507 16.5822 34.4696 16.7743 35.041C16.9275 35.497 17.3527 35.7848 17.8086 35.7848C17.9238 35.7848 18.0411 35.7665 18.1565 35.7276L41.262 27.9611V33.397C41.262 33.3985 41.2619 33.3998 41.2619 33.4013V33.5132L17.461 41.5133C16.8897 41.7054 16.5822 42.3242 16.7743 42.8955C16.9275 43.3515 17.3527 43.6394 17.8086 43.6394C17.9238 43.6394 18.0411 43.621 18.1565 43.5822L41.2617 35.8155V41.3675L26.4 46.3631C25.8287 46.555 25.5212 47.1739 25.7133 47.7453C25.8665 48.2013 26.2917 48.4891 26.7476 48.4891C26.8628 48.4891 26.9801 48.4708 27.0955 48.4319L41.2617 43.67V68.9791H31.834V57.6393C31.834 56.896 31.4943 56.2118 30.9023 55.7625C30.3102 55.3132 29.56 55.17 28.8441 55.3699L18.6866 58.2056C17.5273 58.5292 16.7177 59.5958 16.7177 60.7994V68.9791H10.952L10.9519 15.9463ZM18.9003 60.7996C18.9003 60.5714 19.0538 60.3693 19.2734 60.3079L23.1844 59.216V68.9793H18.9002L18.9003 60.7996ZM25.367 68.9793V58.6066L29.4309 57.4721C29.4858 57.4567 29.537 57.4663 29.5825 57.501C29.6281 57.5357 29.6512 57.5822 29.6512 57.6394V68.9793H25.367ZM43.4445 68.9793V64.3728H59.5492V68.9793H43.4445ZM72.3175 68.4299C72.3175 68.7329 72.071 68.9793 71.7681 68.9793H61.7318V64.3728H72.3175V68.4299Z" fill="white"/>
<path d="M17.8087 51.4935C17.924 51.4935 18.0413 51.4752 18.1567 51.4364L22.2085 50.0744C22.7797 49.8825 23.0872 49.2636 22.8951 48.6922C22.7031 48.1208 22.0842 47.8132 21.5129 48.0056L17.4611 49.3675C16.8899 49.5594 16.5824 50.1783 16.7745 50.7497C16.9277 51.2055 17.3529 51.4935 17.8087 51.4935Z" fill="white"/>
<path d="M48.2237 43.4933H58.926C59.9409 43.4933 60.7665 42.6677 60.7665 41.653V39.0261C60.7665 38.0112 59.9409 37.1855 58.926 37.1855H48.2237C47.2088 37.1855 46.3833 38.0112 46.3833 39.0261V41.653C46.3833 42.6677 47.2089 43.4933 48.2237 43.4933ZM48.5659 39.3682H58.5839V41.3107H48.5659V39.3682Z" fill="white"/>
<path d="M48.2237 51.7921H58.926C59.9409 51.7921 60.7665 50.9666 60.7665 49.9516V47.3248C60.7665 46.3098 59.9409 45.4844 58.926 45.4844H48.2237C47.2088 45.4844 46.3833 46.31 46.3833 47.3248V49.9516C46.3833 50.9666 47.2089 51.7921 48.2237 51.7921ZM48.5659 47.667H58.5839V49.6095H48.5659V47.667Z" fill="white"/>
<path d="M48.2237 60.175H51.7636C52.7785 60.175 53.6042 59.3494 53.6042 58.3346V55.7077C53.6042 54.6928 52.7785 53.8672 51.7636 53.8672H48.2237C47.2088 53.8672 46.3833 54.6928 46.3833 55.7077V58.3346C46.3833 59.3494 47.2089 60.175 48.2237 60.175ZM48.5659 56.0498H51.4215V57.9924H48.5659V56.0498Z" fill="white"/>
</svg>
'],
                ['label_1' => 'Własna', 'label_2' => 'działalność', 'href' => '#self', 'icon' => '
<svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M43.0412 41.32H34.4329C33.7443 41.32 33.2852 40.8608 33.2852 40.1722C33.2852 39.4835 33.7443 39.0244 34.4329 39.0244H43.0412C43.7299 39.0244 44.189 39.4835 44.189 40.1722C44.189 40.8608 43.7299 41.32 43.0412 41.32Z" fill="white"/>
<path d="M27.5465 41.3192H1.14777C0.459108 41.3192 0 40.8601 0 40.1715V35.5804C0 34.8917 0.459108 34.4326 1.14777 34.4326H39.0242C39.7128 34.4326 40.172 34.8917 40.172 35.5804C40.172 36.269 39.7128 36.7282 39.0242 36.7282H2.29554V39.0237H27.5465C28.2351 39.0237 28.6943 39.4828 28.6943 40.1715C28.6943 40.8601 28.2351 41.3192 27.5465 41.3192Z" fill="white"/>
<path d="M70.0139 41.3192H64.8489C64.1603 41.3192 63.7012 40.8601 63.7012 40.1715C63.7012 39.4828 64.1603 39.0237 64.8489 39.0237H68.8661V36.7282H65.6524C64.9637 36.7282 64.5046 36.269 64.5046 35.5804C64.5046 34.8917 64.9637 34.4326 65.6524 34.4326H70.0139C70.7026 34.4326 71.1617 34.8917 71.1617 35.5804V40.1715C71.1617 40.8601 70.7026 41.3192 70.0139 41.3192Z" fill="white"/>
<path d="M70.014 71.162C69.3253 71.162 68.8662 70.7029 68.8662 70.0142V40.1722C68.8662 39.4835 69.3253 39.0244 70.014 39.0244C70.7026 39.0244 71.1618 39.4835 71.1618 40.1722V70.0142C71.1618 70.7029 70.7026 71.162 70.014 71.162Z" fill="white"/>
<path d="M1.14777 71.162C0.459108 71.162 0 70.7029 0 70.0142V40.1722C0 39.4835 0.459108 39.0244 1.14777 39.0244C1.83643 39.0244 2.29554 39.4835 2.29554 40.1722V70.0142C2.29554 70.7029 1.83643 71.162 1.14777 71.162Z" fill="white"/>
<path d="M17.2166 71.1613C16.528 71.1613 16.0688 70.7021 16.0688 70.0135V35.5804C16.0688 34.8917 16.528 34.4326 17.2166 34.4326C17.9053 34.4326 18.3644 34.8917 18.3644 35.5804V70.0135C18.3644 70.7021 17.9053 71.1613 17.2166 71.1613Z" fill="white"/>
<path d="M14.9212 36.7289C14.2326 36.7289 13.7735 36.2698 13.7735 35.5812V22.9557H6.88685V35.5812C6.88685 36.2698 6.42774 36.7289 5.73908 36.7289C5.05042 36.7289 4.59131 36.2698 4.59131 35.5812V21.8079C4.59131 21.1193 5.05042 20.6602 5.73908 20.6602H14.9212C15.6099 20.6602 16.069 21.1193 16.069 21.8079V35.5812C16.069 36.2698 15.6099 36.7289 14.9212 36.7289Z" fill="white"/>
<path d="M5.73885 32.1372H2.29554C1.03299 32.1372 0 31.1042 0 29.8417V25.2506C0 23.9881 1.03299 22.9551 2.29554 22.9551H5.73885C6.42751 22.9551 6.88662 23.4142 6.88662 24.1028C6.88662 24.7915 6.42751 25.2506 5.73885 25.2506H2.29554V29.8417H5.73885C6.42751 29.8417 6.88662 30.3008 6.88662 30.9895C6.88662 31.6781 6.42751 32.1372 5.73885 32.1372Z" fill="white"/>
<path d="M8.03429 18.2496C7.80473 18.2496 7.68995 18.2496 7.4604 18.1348C6.88652 17.7905 6.77174 17.1018 7.00129 16.5279C7.80473 15.1506 7.4604 14.5767 6.77174 13.5437C5.9683 12.1664 4.82053 10.33 7.11607 7.34578C7.4604 6.88667 8.26384 6.77189 8.72295 7.11623C9.18205 7.46056 9.29683 8.26399 8.9525 8.7231C7.57518 10.4448 8.03429 11.1334 8.72295 12.2812C9.52639 13.429 10.5594 15.1506 8.9525 17.6757C8.83772 18.02 8.37862 18.2496 8.03429 18.2496Z" fill="white"/>
<path d="M12.6256 18.3639C12.396 18.3639 12.1665 18.2492 11.9369 18.1344C11.4778 17.6753 11.363 16.9866 11.8221 16.5275C11.9369 16.4127 11.9369 16.1832 11.5926 15.3797C11.1335 14.3468 10.33 12.5103 12.1665 10.7887C12.6256 10.3296 13.3142 10.3296 13.7734 10.7887C14.2325 11.2478 14.2325 11.9364 13.7734 12.3955C13.1995 12.9694 13.1995 13.199 13.7734 14.3468C14.1177 15.265 14.8063 16.5275 13.6586 17.9048C13.3142 18.2492 12.9699 18.3639 12.6256 18.3639Z" fill="white"/>
<path d="M40.1719 29.842H21.8076C19.8564 29.842 18.3643 28.3499 18.3643 26.3987V3.44331C18.3643 1.4921 19.8564 0 21.8076 0H58.5362C60.4874 0 61.9795 1.4921 61.9795 3.44331V18.3643C61.9795 19.053 61.5204 19.5121 60.8317 19.5121C60.1431 19.5121 59.684 19.053 59.684 18.3643V3.44331C59.684 2.75465 59.2249 2.29554 58.5362 2.29554H21.8076C21.1189 2.29554 20.6598 2.75465 20.6598 3.44331V26.3987C20.6598 27.0874 21.1189 27.5465 21.8076 27.5465H40.1719C40.8605 27.5465 41.3197 28.0056 41.3197 28.6943C41.3197 29.3829 40.8605 29.842 40.1719 29.842Z" fill="white"/>
<path d="M41.3197 25.2506H19.512C18.8234 25.2506 18.3643 24.7915 18.3643 24.1028C18.3643 23.4142 18.8234 22.9551 19.512 22.9551H41.3197C42.0083 22.9551 42.4674 23.4142 42.4674 24.1028C42.4674 24.7915 42.0083 25.2506 41.3197 25.2506Z" fill="white"/>
<path d="M24.1033 12.6252C23.759 12.6252 23.5295 12.5104 23.2999 12.2809C22.8408 11.8218 22.8408 11.1331 23.2999 10.674L29.0387 4.93515C29.4979 4.47604 30.1865 4.47604 30.6456 4.93515C31.1047 5.39426 31.1047 6.08292 30.6456 6.54203L24.9068 12.2809C24.6772 12.5104 24.4477 12.6252 24.1033 12.6252Z" fill="white"/>
<path d="M32.1375 11.4778C31.7932 11.4778 31.5636 11.363 31.3341 11.1335C30.875 10.6744 30.875 9.9857 31.3341 9.52659L33.6296 7.23105C34.0887 6.77194 34.7774 6.77194 35.2365 7.23105C35.6956 7.69016 35.6956 8.37882 35.2365 8.83793L32.941 11.1335C32.7114 11.363 32.4818 11.4778 32.1375 11.4778Z" fill="white"/>
<path d="M24.1033 19.5116C23.759 19.5116 23.5295 19.3968 23.2999 19.1673C22.8408 18.7082 22.8408 18.0195 23.2999 17.5604L27.891 12.9693C28.3501 12.5102 29.0387 12.5102 29.4979 12.9693C29.957 13.4284 29.957 14.1171 29.4979 14.5762L24.9068 19.1673C24.6772 19.3968 24.4477 19.5116 24.1033 19.5116Z" fill="white"/>
<path d="M36.7288 36.729C36.0402 36.729 35.5811 36.2699 35.5811 35.5813V28.6946C35.5811 28.006 36.0402 27.5469 36.7288 27.5469C37.4175 27.5469 37.8766 28.006 37.8766 28.6946V35.5813C37.8766 36.2699 37.4175 36.729 36.7288 36.729Z" fill="white"/>
<path d="M32.1376 71.162C30.1864 71.162 28.6943 69.6699 28.6943 67.7187C28.6943 65.7675 30.1864 64.2754 32.1376 64.2754C34.0889 64.2754 35.581 65.7675 35.581 67.7187C35.581 69.6699 34.0889 71.162 32.1376 71.162ZM32.1376 66.5709C31.449 66.5709 30.9899 67.03 30.9899 67.7187C30.9899 68.4074 31.449 68.8665 32.1376 68.8665C32.8263 68.8665 33.2854 68.4074 33.2854 67.7187C33.2854 67.03 32.8263 66.5709 32.1376 66.5709Z" fill="white"/>
<path d="M57.3886 71.162C55.4374 71.162 53.9453 69.6699 53.9453 67.7187C53.9453 65.7675 55.4374 64.2754 57.3886 64.2754C59.3398 64.2754 60.8319 65.7675 60.8319 67.7187C60.8319 69.6699 59.3398 71.162 57.3886 71.162ZM57.3886 66.5709C56.7 66.5709 56.2409 67.03 56.2409 67.7187C56.2409 68.4074 56.7 68.8665 57.3886 68.8665C58.0773 68.8665 58.5364 68.4074 58.5364 67.7187C58.5364 67.03 58.0773 66.5709 57.3886 66.5709Z" fill="white"/>
<path d="M57.3885 66.5709C56.6998 66.5709 56.2407 66.1118 56.2407 65.4231C56.2407 64.1606 55.2077 63.1276 53.9451 63.1276H35.5808C34.3183 63.1276 33.2853 64.1606 33.2853 65.4231C33.2853 66.1118 32.8262 66.5709 32.1375 66.5709C31.4489 66.5709 30.9897 66.1118 30.9897 65.4231C30.9897 62.898 33.0557 60.832 35.5808 60.832H53.9451C56.4702 60.832 58.5362 62.898 58.5362 65.4231C58.5362 66.1118 58.0771 66.5709 57.3885 66.5709Z" fill="white"/>
<path d="M59.6839 56.2407H30.9897C29.0385 56.2407 27.5464 54.7486 27.5464 52.7974C27.5464 50.8462 29.0385 49.3541 30.9897 49.3541H40.4014L44.5334 24.677C44.7629 22.9554 46.255 21.8076 47.9767 21.8076H65.0785C66.1115 21.8076 67.0297 22.2667 67.7183 23.0702C68.407 23.8736 68.6366 24.9066 68.5218 25.8248L64.6194 49.5837C64.3898 50.2723 64.275 50.961 64.275 51.6496C64.275 54.1747 62.209 56.2407 59.6839 56.2407ZM30.9897 51.6496C30.301 51.6496 29.8419 52.1087 29.8419 52.7974C29.8419 53.4861 30.301 53.9452 30.9897 53.9452H59.6839C60.9465 53.9452 61.9795 52.9122 61.9795 51.6496C61.9795 50.8462 62.0943 50.0428 62.209 49.1245L66.1115 25.3657C66.1115 25.0214 66.1115 24.677 65.8819 24.4475C65.6524 24.2179 65.308 23.9884 64.9637 23.9884H47.8619C47.288 23.9884 46.8289 24.4475 46.7141 24.9066L42.4674 50.7314C42.3526 51.3053 41.8935 51.6496 41.3196 51.6496L30.9897 51.6496Z" fill="white"/>
<path d="M28.6943 53.7159C28.6943 53.7159 28.5795 53.7159 28.4647 53.7159C27.8908 53.6011 27.4317 53.0272 27.5465 52.4533V52.2238L28.9238 43.6155C29.3829 40.9756 31.6785 39.0244 34.3184 39.0244H35.5809C36.2696 39.0244 36.7287 39.4835 36.7287 40.1722C36.7287 40.8608 36.2696 41.32 35.5809 41.32H34.4331C32.8263 41.32 31.5637 42.4677 31.3342 43.9598L29.8421 52.6829C29.7273 53.2568 29.2682 53.7159 28.6943 53.7159Z" fill="white"/>
<path d="M42.4676 63.1275C41.7789 63.1275 41.3198 62.6684 41.3198 61.9797V55.0931C41.3198 54.4044 41.7789 53.9453 42.4676 53.9453C43.1563 53.9453 43.6154 54.4044 43.6154 55.0931V61.9797C43.6154 62.6684 43.1563 63.1275 42.4676 63.1275Z" fill="white"/>
<path d="M47.0584 63.1275C46.3698 63.1275 45.9106 62.6684 45.9106 61.9797V55.0931C45.9106 54.4044 46.3698 53.9453 47.0584 53.9453C47.7471 53.9453 48.2062 54.4044 48.2062 55.0931V61.9797C48.2062 62.6684 47.7471 63.1275 47.0584 63.1275Z" fill="white"/>
</svg>'],
                ['label_1' => 'Spółki', 'label_2' => 'cywilne', 'href' => '#civil', 'icon' => '
<svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M35.5809 34.3948C30.3492 34.3948 26.0927 38.6513 26.0927 43.883C26.0927 49.1148 30.3492 53.3713 35.5809 53.3713C40.8127 53.3713 45.0692 49.1148 45.0692 43.883C45.0692 38.6513 40.8127 34.3948 35.5809 34.3948ZM35.5809 50.9992C31.6569 50.9992 28.4648 47.8071 28.4648 43.883C28.4648 39.959 31.6569 36.7669 35.5809 36.7669C39.505 36.7669 42.6971 39.959 42.6971 43.883C42.6971 47.8071 39.505 50.9992 35.5809 50.9992ZM65.2317 59.3014C64.0251 59.3014 62.9042 59.6679 61.9666 60.2894L57.768 56.0908C57.7389 56.0617 57.7006 56.0508 57.6694 56.0253C58.7092 53.3593 59.3015 50.4708 59.3015 47.4411C59.3015 40.3926 56.1944 34.0713 51.2979 29.7229L55.9949 24.0864C56.9839 24.6079 58.1079 24.9066 59.3015 24.9066C63.2256 24.9066 66.4177 21.7145 66.4177 17.7904C66.4177 13.8664 63.2256 10.6743 59.3015 10.6743C55.3775 10.6743 52.1854 13.8664 52.1854 17.7904C52.1854 19.6659 52.9199 21.3691 54.1096 22.6416L49.4475 28.236C45.5423 25.4083 40.7603 23.7206 35.5809 23.7206C33.3427 23.7206 31.1844 24.0533 29.1302 24.6354L26.1419 17.6627C28.9456 16.0122 30.8368 12.9704 30.8368 9.48824C30.8368 4.25651 26.5803 0 21.3486 0C16.1169 0 11.8603 4.25651 11.8603 9.48824C11.8603 14.72 16.1169 18.9765 21.3486 18.9765C22.2566 18.9765 23.1322 18.8407 23.9643 18.6014L26.8766 25.3968C19.016 28.5121 13.2173 35.7011 12.0849 44.3534L7.82834 48.61C6.99666 47.8916 5.92703 47.4412 4.74412 47.4412C2.12768 47.4412 0 49.5688 0 52.1853C0 54.8017 2.12768 56.9294 4.74412 56.9294C7.36056 56.9294 9.48824 54.8017 9.48824 52.1853C9.48824 51.6258 9.37357 51.0964 9.19499 50.5976L11.884 47.9086C12.1364 60.7714 22.6588 71.1618 35.5808 71.1618C44.7401 71.1618 52.6875 65.9349 56.6384 58.3157L60.2894 61.9666C59.6679 62.9042 59.3014 64.0251 59.3014 65.2317C59.3014 68.5014 61.9619 71.1618 65.2316 71.1618C68.5013 71.1618 71.1617 68.5014 71.1617 65.2317C71.1617 61.962 68.5014 59.3014 65.2317 59.3014ZM59.3015 13.0463C61.918 13.0463 64.0457 15.1739 64.0457 17.7904C64.0457 20.4068 61.918 22.5345 59.3015 22.5345C56.6851 22.5345 54.5574 20.4068 54.5574 17.7904C54.5574 15.1739 56.6851 13.0463 59.3015 13.0463ZM14.2324 9.48818C14.2324 5.56409 17.4245 2.372 21.3486 2.372C25.2727 2.372 28.4648 5.56409 28.4648 9.48818C28.4648 13.4123 25.2727 16.6044 21.3486 16.6044C17.4245 16.6044 14.2324 13.4123 14.2324 9.48818ZM4.74417 54.5573C3.43653 54.5573 2.37211 53.4929 2.37211 52.1852C2.37211 50.8776 3.43653 49.8132 4.74417 49.8132C6.05182 49.8132 7.11623 50.8776 7.11623 52.1852C7.11623 53.4929 6.05182 54.5573 4.74417 54.5573ZM22.5845 64.3388C23.0317 60.1799 26.5613 56.9294 30.8369 56.9294H40.3251C44.6007 56.9294 48.1303 60.1799 48.5775 64.3388C44.9731 67.1177 40.4735 68.7897 35.5811 68.7897C30.6886 68.7897 26.1888 67.1177 22.5845 64.3388ZM50.6452 62.5516C49.4517 57.961 45.2842 54.5573 40.3251 54.5573H30.8369C25.8778 54.5573 21.7103 57.961 20.5168 62.5516C16.6375 58.684 14.2325 53.3384 14.2325 47.4411C14.2325 38.0287 20.3634 30.0343 28.8357 27.2022C28.8673 27.1916 28.9004 27.196 28.9315 27.1824C28.95 27.1745 28.9613 27.1583 28.9792 27.1496C31.0604 26.4706 33.2761 26.0925 35.5809 26.0925C47.3521 26.0925 56.9295 35.6699 56.9295 47.4411C56.9295 53.3383 54.5245 58.684 50.6452 62.5516ZM65.2317 68.7897C63.2696 68.7897 61.6736 67.1936 61.6736 65.2316C61.6736 63.2695 63.2696 61.6735 65.2317 61.6735C67.1937 61.6735 68.7898 63.2695 68.7898 65.2316C68.7898 67.1936 67.1937 68.7897 65.2317 68.7897Z" fill="white"/>
</svg>
'],
                ['label_1' => 'Dodatkowe', 'label_2' => 'usługi', 'href' => '#extra', 'icon' => '
<svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M66.7141 26.6856H50.4062V14.8254H60.784C61.6027 14.8254 62.2665 14.1616 62.2665 13.3428V7.41268C62.2665 3.31877 58.9477 -1.41386e-06 54.8538 0H7.41268C3.31877 0 -7.06928e-07 3.31877 0 7.41268V63.749C0 64.5678 0.663754 65.2316 1.48254 65.2316H35.5809V66.7141C35.5809 69.1704 37.5721 71.1617 40.0285 71.1617H66.7141C69.1704 71.1617 71.1617 69.1704 71.1617 66.7141V31.1332C71.1617 28.6769 69.1704 26.6856 66.7141 26.6856ZM59.3014 7.41268V11.8603H50.4062V7.41268C50.4062 4.95633 52.3975 2.96507 54.8538 2.96507C57.3102 2.96507 59.3014 4.95633 59.3014 7.41268ZM2.96507 62.2665V7.41268C2.96507 4.95633 4.95633 2.96507 7.41268 2.96507H48.9237C46.9519 5.57433 47.4411 5.55951 47.4411 26.6856H40.0285C37.5721 26.6856 35.5809 28.6769 35.5809 31.1332V62.2665H2.96507ZM68.1966 66.7141C68.1966 67.5329 67.5329 68.1966 66.7141 68.1966H40.0285C39.2097 68.1966 38.5459 67.5329 38.5459 66.7141V31.1332C38.5459 30.3145 39.2097 29.6507 40.0285 29.6507H66.7141C67.5329 29.6507 68.1966 30.3145 68.1966 31.1332V66.7141Z" fill="white"/>
<path d="M63.7493 32.6162H42.9938C42.175 32.6162 41.5112 33.28 41.5112 34.0987V45.959C41.5112 46.7778 42.175 47.4416 42.9938 47.4416H63.7493C64.568 47.4416 65.2318 46.7778 65.2318 45.959V34.0987C65.2318 33.28 64.568 32.6162 63.7493 32.6162ZM62.2667 44.4765H44.4763V35.5813H62.2667V44.4765Z" fill="white"/>
<path d="M54.8539 50.4062H51.8888C51.07 50.4062 50.4062 51.07 50.4062 51.8888C50.4062 52.7076 51.07 53.3713 51.8888 53.3713H54.8539C55.6726 53.3713 56.3364 52.7076 56.3364 51.8888C56.3364 51.07 55.6726 50.4062 54.8539 50.4062Z" fill="white"/>
<path d="M45.9588 50.4062H42.9938C42.175 50.4062 41.5112 51.07 41.5112 51.8888C41.5112 52.7076 42.175 53.3713 42.9938 53.3713H45.9588C46.7776 53.3713 47.4414 52.7076 47.4414 51.8888C47.4414 51.07 46.7776 50.4062 45.9588 50.4062Z" fill="white"/>
<path d="M63.7489 50.4062H60.7838C59.965 50.4062 59.3013 51.07 59.3013 51.8888C59.3013 52.7076 59.965 53.3713 60.7838 53.3713H63.7489C64.5677 53.3713 65.2314 52.7076 65.2314 51.8888C65.2314 51.07 64.5677 50.4062 63.7489 50.4062Z" fill="white"/>
<path d="M54.8539 56.3359H51.8888C51.07 56.3359 50.4062 56.9997 50.4062 57.8185C50.4062 58.6373 51.07 59.301 51.8888 59.301H54.8539C55.6726 59.301 56.3364 58.6373 56.3364 57.8185C56.3364 56.9997 55.6726 56.3359 54.8539 56.3359Z" fill="white"/>
<path d="M45.9588 56.3359H42.9938C42.175 56.3359 41.5112 56.9997 41.5112 57.8185C41.5112 58.6373 42.175 59.301 42.9938 59.301H45.9588C46.7776 59.301 47.4414 58.6373 47.4414 57.8185C47.4414 56.9997 46.7776 56.3359 45.9588 56.3359Z" fill="white"/>
<path d="M63.7489 56.3359H60.7838C59.965 56.3359 59.3013 56.9997 59.3013 57.8185C59.3013 58.6373 59.965 59.301 60.7838 59.301H63.7489C64.5677 59.301 65.2314 58.6373 65.2314 57.8185C65.2314 56.9997 64.5677 56.3359 63.7489 56.3359Z" fill="white"/>
<path d="M54.8539 62.2666H51.8888C51.07 62.2666 50.4062 62.9304 50.4062 63.7491C50.4062 64.5679 51.07 65.2317 51.8888 65.2317H54.8539C55.6726 65.2317 56.3364 64.5679 56.3364 63.7491C56.3364 62.9304 55.6726 62.2666 54.8539 62.2666Z" fill="white"/>
<path d="M45.9588 62.2666H42.9938C42.175 62.2666 41.5112 62.9304 41.5112 63.7491C41.5112 64.5679 42.175 65.2317 42.9938 65.2317H45.9588C46.7776 65.2317 47.4414 64.5679 47.4414 63.7491C47.4414 62.9304 46.7776 62.2666 45.9588 62.2666Z" fill="white"/>
<path d="M63.7489 62.2666H60.7838C59.965 62.2666 59.3013 62.9304 59.3013 63.7491C59.3013 64.5679 59.965 65.2317 60.7838 65.2317H63.7489C64.5677 65.2317 65.2314 64.5679 65.2314 63.7491C65.2314 62.9304 64.5677 62.2666 63.7489 62.2666Z" fill="white"/>
<path d="M31.1331 28.168H10.3776C9.55877 28.168 8.89502 28.8317 8.89502 29.6505C8.89502 30.4693 9.55877 31.133 10.3776 31.133H31.1331C31.9518 31.133 32.6156 30.4693 32.6156 29.6505C32.6156 28.8317 31.9518 28.168 31.1331 28.168Z" fill="white"/>
<path d="M31.1331 42.9932H10.3776C9.55877 42.9932 8.89502 43.6569 8.89502 44.4757C8.89502 45.2945 9.55877 45.9582 10.3776 45.9582H31.1331C31.9518 45.9582 32.6156 45.2945 32.6156 44.4757C32.6156 43.6569 31.9518 42.9932 31.1331 42.9932Z" fill="white"/>
<path d="M10.3776 16.3078H40.0283C40.847 16.3078 41.5108 15.6441 41.5108 14.8253C41.5108 14.0065 40.847 13.3428 40.0283 13.3428H10.3776C9.55877 13.3428 8.89502 14.0065 8.89502 14.8253C8.89502 15.6441 9.55877 16.3078 10.3776 16.3078Z" fill="white"/>
<path d="M10.3776 23.7209H40.0283C40.847 23.7209 41.5108 23.0572 41.5108 22.2384C41.5108 21.4196 40.847 20.7559 40.0283 20.7559H10.3776C9.55877 20.7559 8.89502 21.4196 8.89502 22.2384C8.89502 23.0572 9.55877 23.7209 10.3776 23.7209Z" fill="white"/>
<path d="M31.1331 35.5811H10.3776C9.55877 35.5811 8.89502 36.2448 8.89502 37.0636C8.89502 37.8824 9.55877 38.5461 10.3776 38.5461H31.1331C31.9518 38.5461 32.6156 37.8824 32.6156 37.0636C32.6156 36.2448 31.9518 35.5811 31.1331 35.5811Z" fill="white"/>
<path d="M31.1331 50.4062H10.3776C9.55877 50.4062 8.89502 51.07 8.89502 51.8888C8.89502 52.7076 9.55877 53.3713 10.3776 53.3713H31.1331C31.9518 53.3713 32.6156 52.7076 32.6156 51.8888C32.6156 51.07 31.9518 50.4062 31.1331 50.4062Z" fill="white"/>
</svg>
'],
                ['label_1' => 'Wirtualne', 'label_2' => 'biuro', 'href' => '#virtual', 'icon' => '
<svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M29.8418 49.3535H32.1373V51.6491H29.8418V49.3535Z" fill="white"/>
<path d="M39.0239 49.3535H41.3195V51.6491H39.0239V49.3535Z" fill="white"/>
<path d="M34.4331 49.3535H36.7286V51.6491H34.4331V49.3535Z" fill="white"/>
<path d="M29.8418 44.7627H32.1373V47.0582H29.8418V44.7627Z" fill="white"/>
<path d="M39.0239 44.7627H41.3195V47.0582H39.0239V44.7627Z" fill="white"/>
<path d="M34.4331 44.7627H36.7286V47.0582H34.4331V44.7627Z" fill="white"/>
<path d="M34.4331 53.9453H36.7286V56.2408H34.4331V53.9453Z" fill="white"/>
<path d="M34.4331 58.5361H36.7286V60.8317H34.4331V58.5361Z" fill="white"/>
<path d="M29.8418 53.9453H32.1373V56.2408H29.8418V53.9453Z" fill="white"/>
<path d="M39.0239 53.9453H41.3195V56.2408H39.0239V53.9453Z" fill="white"/>
<path d="M29.8418 58.5361H32.1373V60.8317H29.8418V58.5361Z" fill="white"/>
<path d="M39.0239 58.5361H41.3195V60.8317H39.0239V58.5361Z" fill="white"/>
<path d="M53.9447 50.5018H45.9104V41.3196C45.9104 40.6857 45.3965 40.1719 44.7626 40.1719H26.3984C25.7645 40.1719 25.2506 40.6857 25.2506 41.3196V50.5018H17.2162C16.5824 50.5018 16.0685 51.0156 16.0685 51.6495V68.866H13.7729V71.1615H57.388V68.866H55.0925V51.6495C55.0925 51.0156 54.5786 50.5018 53.9447 50.5018ZM52.797 52.7973V68.866H45.9104V52.7973H52.797ZM43.6149 42.4674V68.866H40.1716V65.4227H41.3193V63.1272H29.8417V65.4227H30.9894V68.866H27.5461V42.4674H43.6149ZM37.876 65.4227V68.866H33.285V65.4227H37.876ZM18.364 52.7973H25.2506V68.866H18.364V52.7973Z" fill="white"/>
<path d="M48.2061 55.0928H50.5016V57.3883H48.2061V55.0928Z" fill="white"/>
<path d="M48.2061 59.6836H50.5016V61.9791H48.2061V59.6836Z" fill="white"/>
<path d="M48.2061 64.2744H50.5016V66.5699H48.2061V64.2744Z" fill="white"/>
<path d="M20.6597 55.0928H22.9552V57.3883H20.6597V55.0928Z" fill="white"/>
<path d="M20.6597 59.6836H22.9552V61.9791H20.6597V59.6836Z" fill="white"/>
<path d="M20.6597 64.2744H22.9552V66.5699H20.6597V64.2744Z" fill="white"/>
<path d="M52.7974 3.44336H55.0929V5.73889H52.7974V3.44336Z" fill="white"/>
<path d="M56.2407 3.44336H58.5362V5.73889H56.2407V3.44336Z" fill="white"/>
<path d="M59.6836 3.44336H61.9791V5.73889H59.6836V3.44336Z" fill="white"/>
<path d="M52.7974 8.03418H55.0929V10.3297H52.7974V8.03418Z" fill="white"/>
<path d="M56.2407 8.03418H58.5362V10.3297H56.2407V8.03418Z" fill="white"/>
<path d="M59.6836 8.03418H61.9791V10.3297H59.6836V8.03418Z" fill="white"/>
<path d="M52.7974 12.625H55.0929V14.9205H52.7974V12.625Z" fill="white"/>
<path d="M56.2407 12.625H58.5362V14.9205H56.2407V12.625Z" fill="white"/>
<path d="M59.6836 12.625H61.9791V14.9205H59.6836V12.625Z" fill="white"/>
<path d="M65.4228 16.1796V2.29553C65.4215 1.02827 64.3945 0.00126654 63.1272 0H51.6496C50.3823 0.00126654 49.3553 1.02827 49.3541 2.29553L49.3541 16.1796C45.755 17.4357 43.6152 19.4969 43.6152 21.8076C43.6152 25.7334 49.5362 28.6942 57.3884 28.6942C65.2406 28.6942 71.1616 25.7334 71.1616 21.8076C71.1616 19.4969 69.0218 17.4357 65.4228 16.1796ZM51.6496 2.29553H63.1272V20.6598H60.8317V18.3642H61.9795V16.0687H52.7974V18.3642H53.9451V20.6598H51.6496V2.29553ZM58.5362 18.3642V20.6598H56.2407V18.3642H58.5362ZM57.3884 26.3986C50.819 26.3986 45.9108 23.9747 45.9108 21.8075C45.9108 20.6813 47.2297 19.5021 49.3541 18.6258V21.8075C49.3541 22.4414 49.8679 22.9553 50.5018 22.9553H64.275C64.9089 22.9553 65.4228 22.4414 65.4228 21.8075V18.6258C67.5471 19.5021 68.8661 20.6813 68.8661 21.8075C68.8661 23.9747 63.9578 26.3986 57.3884 26.3986Z" fill="white"/>
<path d="M9.18213 3.44336H11.4777V5.73889H9.18213V3.44336Z" fill="white"/>
<path d="M12.6255 3.44336H14.921V5.73889H12.6255V3.44336Z" fill="white"/>
<path d="M16.0688 3.44336H18.3644V5.73889H16.0688V3.44336Z" fill="white"/>
<path d="M9.18213 8.03418H11.4777V10.3297H9.18213V8.03418Z" fill="white"/>
<path d="M12.6255 8.03418H14.921V10.3297H12.6255V8.03418Z" fill="white"/>
<path d="M16.0688 8.03418H18.3644V10.3297H16.0688V8.03418Z" fill="white"/>
<path d="M9.18213 12.625H11.4777V14.9205H9.18213V12.625Z" fill="white"/>
<path d="M12.6255 12.625H14.921V14.9205H12.6255V12.625Z" fill="white"/>
<path d="M16.0688 12.625H18.3644V14.9205H16.0688V12.625Z" fill="white"/>
<path d="M13.7732 28.6942C21.6254 28.6942 27.5464 25.7334 27.5464 21.8076C27.5464 19.4969 25.4066 17.4358 21.8075 16.1796V2.29553C21.8063 1.02827 20.7793 0.00126541 19.512 0H8.03436C6.7671 0.00126541 5.74009 1.02827 5.73883 2.29553V16.1796C2.1398 17.4358 0 19.4969 0 21.8076C0 25.7334 5.92097 28.6942 13.7732 28.6942ZM8.03436 2.29558H19.512V20.6598H17.2165V18.3643H18.3642V16.0688H9.18212V18.3643H10.3299V20.6598H8.03436V2.29558ZM14.921 18.3643V20.6598H12.6254V18.3643H14.921ZM5.73883 18.6258V21.8076C5.73883 22.4415 6.2527 22.9554 6.88659 22.9554H20.6598C21.2937 22.9554 21.8075 22.4415 21.8075 21.8076V18.6258C23.9319 19.5022 25.2508 20.6813 25.2508 21.8076C25.2508 23.9748 20.3426 26.3987 13.7732 26.3987C7.2038 26.3987 2.29553 23.9748 2.29553 21.8076C2.29553 20.6813 3.61451 19.5022 5.73883 18.6258Z" fill="white"/>
<path d="M21.4888 39.6641L23.2312 38.1696L30.1207 46.2021L28.3783 47.6966L21.4888 39.6641Z" fill="white"/>
<path d="M45.2881 31.4072L52.1776 23.3747L53.92 24.8692L47.0305 32.9017L45.2881 31.4072Z" fill="white"/>
</svg>
'],
            ];
        } else {
            $normalized = [];
            foreach ($items as $it) {
                $normalized[] = [
                    'label_1' => $it['label_1'] ?? ($it['title_1'] ?? ''),
                    'label_2' => $it['label_2'] ?? ($it['title_2'] ?? ''),
                    'href' => $it['href'] ?? ($it['link'] ?? '#'),
                    'icon' => $it['icon'] ?? 'docs',
                ];
            }
            $items = $normalized;
        }

        return [
            'title' => $this->getAcfFieldSafe('services_title', false, 'W czym możemy Ci pomóc?'),
            'description' => $this->getAcfFieldSafe('services_description', false, 'Wspieramy klientów prywatnych, a także przedsiębiorstwa oraz instytucje. Z naszych usług
                                księgowych w Ealing mogą skorzystać zarówno małe firmy (Self–Employed i Partnership), jak i
                                średnie oraz duże spółki (Limited Companies). Dzięki zatrudnianiu wykwalifikowanych i
                                doświadczonych pracowników o różnych specjalizacjach możemy pomagać kompleksowo — również w
                                kwestiach związanych z podatkami, sprawami formalnymi, kredytami czy też zakładaniem lub
                                zamykaniem działalności.

                                Świadczymy usługi księgowe w całej Wielkiej Brytanii, zapewniając indywidualne podejście
                                oraz
                                profesjonalizm. Nasze biuro księgowe realizując zlecenia dla naszych klientów, działa z
                                pełnym
                                zaangażowaniem i sumiennie wykonujemy wszelkie zadania — tak, abyś osiągał swoje cele i mógł
                                skupić
                                się na rozwoju własnej działalności.
                                Sprawdź, czym zajmuje się nasze biuro księgowe i skorzystaj z usług, świadczonych na
                                najwyższym
                                poziomie!'),
            'items' => $items,
        ];
    }

    private function getBlogData()
    {
        return [
            'title' => $this->getAcfFieldSafe('blog_title', false, 'Blog'),
            'url' => $this->getAcfUrlSafe('blog_url', false, '/blog'),
            'read_more_text' => $this->getAcfFieldSafe('blog_read_more_text', false, 'CZYTAJ WIĘCEJ'),
        ];
    }

    private function getTestimonialsData()
    {
        $testimonials = $this->getAcfFieldSafe('testimonials', false, []);

        if (empty($testimonials)) {
            $default_testimonials = [
                ['text' => 'Bardzo polecam! Profesjonalnie i miło.', 'name' => 'Ewa Foryszewska–Jarzyńska'],
                ['text' => 'Highly Recommended — I been using Optimum Tax for many years.', 'name' => 'Tomasz Ostapiuk'],
                ['text' => 'Kompetentna i miła obsługa, indywidualne podejście do klienta.', 'name' => 'Jagoda Katarzyna'],
                ['text' => 'Usługi na wysokim poziomie – rzetelnie, terminowo i profesjonalnie.', 'name' => 'Aleksandra Prokop'],
            ];
        } else {
            $default_testimonials = [];
            foreach ($testimonials as $testimonial) {
                $default_testimonials[] = [
                    'text' => $testimonial['text'] ?? $testimonial['testimonial_text'] ?? '',
                    'name' => $testimonial['name'] ?? $testimonial['client_name'] ?? 'Anonymous',
                ];
            }
        }

        return [
            'title' => $this->getAcfFieldSafe('testimonials_title', false, 'Nie musisz nam wierzyć na słowo – zobacz, co mówią inni.'),
            'testimonials' => $default_testimonials,
            'subtitle' => $this->getAcfFieldSafe('testimonials_subtitle', false, 'Zobacz pełne recenzje na naszym Facebooku.'),
            'cta_text' => $this->getAcfFieldSafe('testimonials_cta_text', false, $this->getAcfFieldSafe('testimonials_cta_view_more', false, 'ZOBACZ')),
            'cta_url' => $this->getAcfUrlSafe('testimonials_cta_url', false, $this->getAcfUrlSafe('testimonials_cta_view_more_url', false, '/blog')),
            'facebook_icon' => $this->getAcfFieldSafe(
                'testimonials_facebook_icon',
                false,
                'fa-solid fa-arrow-up-right-from-square'
            ),
        ];
    }

    private function getContactSectionData()
    {
        return [
            'heading' => $this->getAcfFieldSafe('contact_heading', false, '<strong>Postaw na <br> pewność i spokój,</strong> powierz księgowość ekspertom'),
            'background_image' => $this->getAcfImageSafe('contact_background_image', false, 'full', get_template_directory_uri() . '/resources/images/businessman-working.png'),
        ];
    }

    private function getAcfFieldSafe($field_name, $post_id = false, $fallback = null)
    {
        if (function_exists('get_field')) {
            $value = \get_field($field_name, $post_id);
            return !empty($value) ? $value : $fallback;
        }
        return $fallback;
    }

    private function getAcfImageSafe($field_name, $post_id = false, $size = 'full', $fallback_url = '')
    {
        if (function_exists('get_field')) {
            $image = \get_field($field_name, $post_id);
            if ($image) {
                if (is_array($image) && isset($image['url'])) {
                    return $image['url'];
                } elseif (is_string($image) && ctype_digit($image)) {
                    return wp_get_attachment_image_url((int) $image, $size) ?: $fallback_url;
                } elseif (is_numeric($image)) {
                    return wp_get_attachment_image_url((int) $image, $size) ?: $fallback_url;
                } elseif (is_string($image)) {
                    return $image;
                }
            }
        }
        return $fallback_url;
    }

    private function getAcfUrlSafe($field_name, $post_id = false, $fallback = '')
    {
        $url = $this->getAcfFieldSafe($field_name, $post_id, $fallback);
        if (!empty($url) && strpos($url, '/') === 0) {
            return home_url($url);
        }
        return $url;
    }
}
